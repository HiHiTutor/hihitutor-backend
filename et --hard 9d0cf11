[33mc01d2a3[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;31morigin/main[m[33m)[m ğŸ› fix: ä¿®æ­£ submit profile é›™ if éŒ¯èª¤
[33m08644e0[m ğŸ› ä¿®æ­£ profile æäº¤æ™‚ç¼ºå°‘ user æ¬„ä½ï¼Œé¿å… validation failed
[33m9d0cf11[m ğŸ› fix: add user field when creating UserProfile
[33mee1abea[m âœ… åŠ å…¥ fallback é ­åƒé‚è¼¯ + ä¿®æ­£ profileRoutes å„²å­˜æ¢ä»¶
[33m0228013[m ğŸ” ä¿®æ­£ authMiddleware.js åŠ å…¥ req.user.role æ”¯æ´
[33m4269f4f[m ğŸ” è¨»å†Šæ™‚åŒæ­¥åˆ¤æ–· user role ä¸¦åŠ å…¥ JWT payloadï¼Œèˆ‡ç™»å…¥é‚è¼¯ä¸€è‡´
[33m6e01adc[m ğŸ” ä¿®æ­£ login APIï¼Œæ ¹æ“š tags æ±ºå®š JWT payload ä¸­çš„ role æ¬„ä½
[33m6da8ea3[m ğŸ” login token åŠ å…¥ userCode, userType, tags ç­‰æ¬„ä½ä»¥ä¾¿è­˜åˆ¥èº«ä»½
[33me7ede0d[m ğŸ› ï¸ ç§»é™¤è¨»å†Šæ™‚çš„é©—è­‰ç¢¼é‡è¤‡é©—è­‰ï¼Œåªæª¢æŸ¥ verifiedPhones Set
[33m1d0e759[m âœ… ä¿®æ­£ smsRoutes.js é‡è¤‡å°å‡º verifiedPhones
[33m26d4107[m ğŸ”¥ ä¿®æ­£ smsRoutes.js å°å‡º verifiedPhonesï¼Œä¿®æ­£ userRoutes.js ä¸­å°å…¥èªæ³•
[33m5497196[m ğŸš« é™åˆ¶åˆªé™¤ç”¨æˆ¶åƒ…é™ admin æ¬Šé™
[33mcceadda[m æ–°å¢ /public è·¯ç”±ï¼Œå…è¨±æœªç™»å…¥ç”¨æˆ¶æŸ¥çœ‹å…¬é–‹å€‹æ¡ˆ
[33mc41c399[m âœ¨ æ–°å¢å…¬é–‹å€‹æ¡ˆ APIï¼šæœªç™»å…¥ä¹Ÿå¯è®€å– /api/cases/public
[33mf475458[m âœ¨ æ–°å¢ /api/cases/publicï¼šå…è¨±æœªç™»å…¥ç”¨æˆ¶æŸ¥çœ‹å·²å¯©æ‰¹å€‹æ¡ˆ
[33mf08d83c[m ğŸ”§ æ›´æ–° Case Schema + Routeï¼šåŠ å…¥ createdByã€matchedTutor æ¬„ä½
[33m02c5149[m fix: add CORS preflight support for Render
[33m6b13335[m Trigger redeploy
[33m5616d62[m âœ… ä¿®æ­£ my-cases routerï¼šä½¿ç”¨ createdBy è€Œé userId
[33mdf8c994[m âœ… ç§»é™¤ userRoutes ä¸­ my-casesï¼Œè½‰ç§»åˆ° userSelfRoutes
[33me7e12c2[m feat: æ–°å¢ /api/self-users/my-cases ä¸¦ç§»é™¤é‡è¤‡ caseRoutes /my
[33mb6b5a89[m ğŸ”¥ ä¿®æ­£ GET /api/profiles/all çš„éŒ¯èª¤ï¼Œä¿®æ­£ populate æ¬„ä½
[33m7269261[m feat: /me API now returns profile and user cases
[33m89e5114[m chore: update .gitignore to exclude .env and seed scripts
[33m8226fa7[m fix: add Vercel URLs to CORS whitelist
[33m25409e6[m fix: correct case-sensitive import for case.js
[33m9ccbc2f[m fix: rename Case.js to case.js for Linux compatibility
[33m66a29d2[m fix: remove invalid module.exports from server.js
[33m38055cd[m fix: Rename Case.js to case.js to fix Linux case sensitivity issue
[33m8cd755a[m â™»ï¸ èª¿æ•´ /me èˆ‡ /my ç‚º /self-users è·¯ç”±çµæ§‹
[33m986ba3c[m âœ… æ–°å¢ userSelfRoutes è·¯ç”±è¨»å†Šåˆ° server.js
[33m691ba51[m ğŸ›  ä¿®æ­£ smsRoutes export åŠ server.js å¼•å…¥ router è§£æ§‹å•é¡Œ
[33m117fd99[m ğŸ› ä¿®æ­£ smsRoutes æ›è¼‰éŒ¯èª¤
[33m9e83917[m âœ… ä¿®æ­£ smsRoutes export ç‚ºæ­£ç¢º middleware function
[33m81eea81[m â™»ï¸ èª¿æ•´ server.js çµæ§‹åŠæ ¼å¼ï¼Œä¿ç•™æ‰€æœ‰åŠŸèƒ½
[33m78b18ac[m ğŸ§ª åŠ å…¥ /test-plain æœ€ç°¡æ¸¬è©¦ API
[33m1912207[m ğŸ§ª æ¸¬è©¦ /me è·¯ç”±ï¼ˆè·³é middlewareï¼‰
[33m5c10b46[m ğŸ”§ æ¸¬è©¦æœ€ç°¡å–® /me API
[33m03db22b[m ğŸ æ·±å±¤ Debug /api/users/me response çµæ§‹
[33mdc532b5[m ğŸ”¥ ä¿®æ­£ /me è·¯ç”±é¿å… mongoose object å‡ºéŒ¯
[33m81a8afe[m ğŸ§ª æ¸¬è©¦ /me API æœ€ç°¡å›æ‡‰
[33m97a64d8[m ğŸ”¥ æœ€çµ‚ä¿®æ­£ /me APIï¼Œè¿”å›ç´” JSON çµæ§‹
[33m11e0a4a[m âœ… ä¿®æ­£ /me å›å‚³æ¬„ä½ï¼Œè§£æ±º ObjectId å°è‡´ä¼ºæœå™¨éŒ¯èª¤å•é¡Œ
[33mc63480f[m ğŸ”¥ ä¿®æ­£ /me ObjectId å±•é–‹å•é¡Œï¼Œæ”¹ç‚ºæ‰‹å‹•å›å‚³æ¬„ä½
[33m6aba855[m ğŸ› ï¸ Remove spread from /me response to fix 500 error
[33m5d7f018[m ğŸš‘ ç§»é™¤ plainUser spreadï¼Œé¿å… Mongoose å°è±¡é€ æˆ 500 éŒ¯èª¤
[33m8e87180[m ğŸ”¥ å¼·åŒ– /api/users/me çš„ toObject() è™•ç†ï¼Œé¿å…ä¼ºæœå™¨éŒ¯èª¤
[33m126de57[m ğŸ Fix: /me API - ä¿®æ­£é Mongoose Document å°è‡´ toObject() å‡ºéŒ¯
[33mcd74d6c[m âœ… Fix: /me handler æ”¯æ´é Document user å°è±¡
[33m6d61709[m ğŸ› Fix: /api/users/me null profile é˜²çˆ†éŒ¯
[33m3e5b477[m ğŸ› Fix: /me route handles null userProfile safely
[33md51ad63[m ğŸ› Fix: Prevent crash when userProfile is null in /me
[33mbb88bdc[m ğŸ”§ Fix: avoid double query in /api/users/me
[33m30b15a5[m ğŸ Fix: ensure authHeader defined inside middleware
[33mec9ea40[m ğŸ Fix /me route to properly extract userId
[33m702e517[m ğŸ”§ Fix /api/users/me route to support id or _id
[33m94f5e02[m ğŸ§ª åŠ  log æª¢æŸ¥ JWT Token å‚³å…¥æƒ…æ³
[33m6b15a16[m ğŸ§ª /me åŠ  req.user log æ’æŸ¥å•é¡Œ
[33me49c2e9[m ğŸ› ä¿®æ­£ authHeader æœªå®šç¾©éŒ¯èª¤
[33mdfe81cb[m ğŸ”§ Add debug logs for /api/users/me to check req.user
[33m21771c2[m ğŸ› debug /me éŒ¯èª¤ - åŠ å…¥éŒ¯èª¤è¨Šæ¯ log
[33mcb00114[m ğŸ”¥ ä¿®æ­£ /me éŒ¯èª¤ï¼šadmin ç„¡ profile æ™‚å®¹éŒ¯
[33m9434cdf[m ğŸ”§ ä¿®æ­£ /api/users/me ç”¨ req.user
[33m3f768e3[m ğŸ”¥ ä¿®æ­£ smsRoutes åŒ¯å…¥éŒ¯èª¤ï¼ˆRouter.use requires middlewareï¼‰
[33m0d62caa[m âœ… åŠ å…¥é©—è­‰ç¢¼é‚è¼¯ & /me API
[33m50f5f91[m æ–°å¢ /api/cases/myï¼Œæ ¹æ“šç™»å…¥èº«ä»½å›å‚³å°å¸«æˆ–å­¸ç”Ÿçš„å€‹æ¡ˆ
[33m88aff6c[m æ–°å¢ /api/users/me APIï¼Œç”¨ JWT Token å–å¾—ç•¶å‰ç™»å…¥ç”¨æˆ¶
[33m9111c79[m ğŸš€ ç§»å‹• smsRoutes è¨»å†Šä½ç½®åˆ° MongoDB é€£æ¥å¾Œ
[33mb8d0de6[m feat: æ”¯æ´ç”¨ identifier (email or phone) ç™»å…¥
[33mcce71c0[m fix: ä¿®æ­£ userRoutes ç™»å…¥è¨»å†Šè·¯ç”±ä¸éœ€ token é©—è­‰
[33ma1007a2[m fix: ä¿®æ­£ CORS è¨­å®šèªæ³•éŒ¯èª¤
[33m16a7e29[m chore: è¨­å®š CORS å…è¨±å‰ç«¯ render åŸŸå
[33md0d65e8[m fix: ä¿®æ­£ /api/cases æ’åº id å°æ‡‰ _id
[33m5b4c716[m fix: correct / route and remove duplicates
[33mdb74293[m fix: tidy up route definitions and add root / message
[33mba71d2a[m Update profileRoutes.js
[33m949bf9f[m Update userRoutes.js
[33m8d3d5ae[m Update userRoutes.js
[33m563162d[m Update userRoutes.js
[33m9a476c4[m Update server.js
[33m2bcad99[m Initial commit for backend
